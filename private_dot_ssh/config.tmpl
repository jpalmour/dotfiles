# Global defaults
Host *
  ServerAliveInterval 60
  ServerAliveCountMax 2
{{- if eq .chezmoi.os "darwin" }}
  UseKeychain yes
  IdentityAgent ~/.1password/agent.sock
{{- else if eq .chezmoi.os "linux" }}
  IdentityAgent ~/.1password/agent.sock
{{- end }}
  # ForwardAgent can be handy if you hop hosts, but keep it off unless needed:
  # ForwardAgent no
  # StrictHostKeyChecking ask

# --- Private host blocks from 1Password ---
{{- if lookPath "op" }}
{{- $hostsItemTitle := "ssh-hosts" -}}
{{- $hostsItem := onepasswordItemFields $hostsItemTitle -}}
{{- $hosts := index $hostsItem "hosts" -}}
{{- if not $hosts }}
# ‚ö†Ô∏è  No 'hosts' field found on 1Password item 'ssh-hosts'
# 
# üìö To create the SSH hosts configuration:
#    op item create --category "Secure Note" --title "ssh-hosts" \
#      "hosts=Host example
#     HostName example.com
#     User myuser"
#
# üîç To verify: op item get "ssh-hosts" --fields "hosts"
# üìñ See 1PASS_SETUP.md for detailed instructions
{{- else }}
{{ $hosts | indent 0 }}
{{- end }}
{{- else }}
# 1Password CLI not yet installed - host configs will be added after setup
{{- end }}

