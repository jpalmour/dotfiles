{{- if lookPath "ssh-keygen" }}
[gpg]
    format = ssh

[gpg "ssh"]
    program = {{ if eq .chezmoi.os "windows" }}C:/Windows/System32/OpenSSH/ssh-keygen.exe{{ else }}ssh-keygen{{ end }}

[commit]
    gpgSign = true

[user]
    signingkey = ~/.ssh/{{ if .is_work_machine -}}id_ed25519_work{{- else -}}id_ed25519_dev{{- end }}
{{- else }}
# OpenSSH ssh-keygen not found - install OpenSSH to enable SSH signing
{{- end }}

[push]
    autoSetupRemote = true

{{- if eq .chezmoi.os "windows" }}
# Use Microsoft OpenSSH for consistent SSH behavior on Windows
[core]
    sshCommand = C:/Windows/System32/OpenSSH/ssh.exe
{{- end }}

{{- if .is_wsl }}

# On WSL, use Windows OpenSSH for a shared SSH configuration
[core]
    sshCommand = ssh.exe
{{- end }}

[user]
    name = Joseph Palmour
    email = {{ if and .is_work_machine (ne .work_email ``) -}}{{ .work_email }}{{- else -}}{{ .personal_email }}{{- end }}
